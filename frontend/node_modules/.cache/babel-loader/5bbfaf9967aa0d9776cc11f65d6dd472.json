{"ast":null,"code":"'use strict';\n\nvar _slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar EventEmitter = require('./eventemitter');\n\nvar RemoteAudioTrack = require('./media/track/remoteaudiotrack');\n\nvar RemoteAudioTrackPublication = require('./media/track/remoteaudiotrackpublication');\n\nvar RemoteDataTrack = require('./media/track/remotedatatrack');\n\nvar RemoteDataTrackPublication = require('./media/track/remotedatatrackpublication');\n\nvar RemoteVideoTrack = require('./media/track/remotevideotrack');\n\nvar RemoteVideoTrackPublication = require('./media/track/remotevideotrackpublication');\n\nvar util = require('./util');\n\nvar nInstances = 0;\n/**\n * {@link NetworkQualityLevel} is a value from 0â€“5, inclusive, representing the\n * quality of a network connection.\n * @typedef {number} NetworkQualityLevel\n */\n\n/**\n * @extends EventEmitter\n * @property {Map<Track.SID, AudioTrackPublication>} audioTracks -\n *    The {@link Participant}'s {@link AudioTrackPublication}s\n * @property {Map<Track.SID, DataTrackPublication>} dataTracks -\n *    The {@link Participant}'s {@link DataTrackPublication}s.\n * @property {Participant.Identity} identity - The identity of the {@link Participant}\n * @property {?NetworkQualityLevel} networkQualityLevel - The\n *    {@link Participant}'s current {@link NetworkQualityLevel}, if any\n * @property {?NetworkQualityStats} networkQualityStats - The\n *    {@link Participant}'s current {@link NetworkQualityStats}, if any\n * @property {Participant.SID} sid - The {@link Participant}'s SID\n * @property {string} state - \"connected\", \"disconnected\" or \"reconnecting\"\n * @property {Map<Track.SID, TrackPublication>} tracks -\n *    The {@link Participant}'s {@link TrackPublication}s\n * @property {Map<Track.SID, VideoTrackPublication>} videoTracks -\n *    The {@link Participant}'s {@link VideoTrackPublication}s\n * @emits Participant#disconnected\n * @emits Participant#networkQualityLevelChanged\n * @emits Participant#reconnected\n * @emits Participant#reconnecting\n * @emits Participant#trackDimensionsChanged\n * @emits Participant#trackStarted\n */\n\nvar Participant = function (_EventEmitter) {\n  _inherits(Participant, _EventEmitter);\n  /**\n   * Construct a {@link Participant}.\n   * @param {ParticipantSignaling} signaling\n   * @param {object} [options]\n   */\n\n\n  function Participant(signaling, options) {\n    _classCallCheck(this, Participant);\n\n    var _this = _possibleConstructorReturn(this, (Participant.__proto__ || Object.getPrototypeOf(Participant)).call(this));\n\n    options = Object.assign({\n      RemoteAudioTrack: RemoteAudioTrack,\n      RemoteAudioTrackPublication: RemoteAudioTrackPublication,\n      RemoteDataTrack: RemoteDataTrack,\n      RemoteDataTrackPublication: RemoteDataTrackPublication,\n      RemoteVideoTrack: RemoteVideoTrack,\n      RemoteVideoTrackPublication: RemoteVideoTrackPublication,\n      tracks: []\n    }, options);\n    var indexed = indexTracksById(options.tracks);\n    var log = options.log.createLog('default', _this);\n    var audioTracks = new Map(indexed.audioTracks);\n    var dataTracks = new Map(indexed.dataTracks);\n    var tracks = new Map(indexed.tracks);\n    var videoTracks = new Map(indexed.videoTracks);\n    Object.defineProperties(_this, {\n      _RemoteAudioTrack: {\n        value: options.RemoteAudioTrack\n      },\n      _RemoteAudioTrackPublication: {\n        value: options.RemoteAudioTrackPublication\n      },\n      _RemoteDataTrack: {\n        value: options.RemoteDataTrack\n      },\n      _RemoteDataTrackPublication: {\n        value: options.RemoteDataTrackPublication\n      },\n      _RemoteVideoTrack: {\n        value: options.RemoteVideoTrack\n      },\n      _RemoteVideoTrackPublication: {\n        value: options.RemoteVideoTrackPublication\n      },\n      _audioTracks: {\n        value: audioTracks\n      },\n      _dataTracks: {\n        value: dataTracks\n      },\n      _instanceId: {\n        value: ++nInstances\n      },\n      _log: {\n        value: log\n      },\n      _signaling: {\n        value: signaling\n      },\n      _tracks: {\n        value: tracks\n      },\n      _trackEventReemitters: {\n        value: new Map()\n      },\n      _trackPublicationEventReemitters: {\n        value: new Map()\n      },\n      _trackSignalingUpdatedEventCallbacks: {\n        value: new Map()\n      },\n      _videoTracks: {\n        value: videoTracks\n      },\n      audioTracks: {\n        enumerable: true,\n        value: new Map()\n      },\n      dataTracks: {\n        enumerable: true,\n        value: new Map()\n      },\n      identity: {\n        enumerable: true,\n        get: function get() {\n          return signaling.identity;\n        }\n      },\n      networkQualityLevel: {\n        enumerable: true,\n        get: function get() {\n          return signaling.networkQualityLevel;\n        }\n      },\n      networkQualityStats: {\n        enumerable: true,\n        get: function get() {\n          return signaling.networkQualityStats;\n        }\n      },\n      sid: {\n        enumerable: true,\n        get: function get() {\n          return signaling.sid;\n        }\n      },\n      state: {\n        enumerable: true,\n        get: function get() {\n          return signaling.state;\n        }\n      },\n      tracks: {\n        enumerable: true,\n        value: new Map()\n      },\n      videoTracks: {\n        enumerable: true,\n        value: new Map()\n      }\n    });\n\n    _this._tracks.forEach(reemitTrackEvents.bind(null, _this));\n\n    signaling.on('networkQualityLevelChanged', function () {\n      return _this.emit('networkQualityLevelChanged', _this.networkQualityLevel, _this.networkQualityStats && (_this.networkQualityStats.audio || _this.networkQualityStats.video) ? _this.networkQualityStats : null);\n    });\n    reemitSignalingStateChangedEvents(_this, signaling);\n    log.info('Created a new Participant' + (_this.identity ? ': ' + _this.identity : ''));\n    return _this;\n  }\n  /**\n   * Get the {@link RemoteTrack} events to re-emit.\n   * @private\n   * @returns {Array<Array<string>>} events\n   */\n\n\n  _createClass(Participant, [{\n    key: '_getTrackEvents',\n    value: function _getTrackEvents() {\n      return [['dimensionsChanged', 'trackDimensionsChanged'], ['message', 'trackMessage'], ['started', 'trackStarted']];\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_getTrackPublicationEvents',\n    value: function _getTrackPublicationEvents() {\n      return [];\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return '[Participant #' + this._instanceId + ': ' + this.sid + ']';\n    }\n    /**\n     * @private\n     * @param {RemoteTrack} track\n     * @param {Track.ID} id\n     * @returns {?RemoteTrack}\n     */\n\n  }, {\n    key: '_addTrack',\n    value: function _addTrack(track, id) {\n      var log = this._log;\n\n      if (this._tracks.has(id)) {\n        return null;\n      }\n\n      this._tracks.set(id, track);\n\n      var tracksByKind = {\n        audio: this._audioTracks,\n        video: this._videoTracks,\n        data: this._dataTracks\n      }[track.kind];\n      tracksByKind.set(id, track);\n      reemitTrackEvents(this, track, id);\n      log.info('Added a new ' + util.trackClass(track) + ':', id);\n      log.debug(util.trackClass(track) + ':', track);\n      return track;\n    }\n    /**\n     * @private\n     * @param {RemoteTrackPublication} publication\n     * @returns {?RemoteTrackPublication}\n     */\n\n  }, {\n    key: '_addTrackPublication',\n    value: function _addTrackPublication(publication) {\n      var log = this._log;\n\n      if (this.tracks.has(publication.trackSid)) {\n        return null;\n      }\n\n      this.tracks.set(publication.trackSid, publication);\n      var trackPublicationsByKind = {\n        audio: this.audioTracks,\n        data: this.dataTracks,\n        video: this.videoTracks\n      }[publication.kind];\n      trackPublicationsByKind.set(publication.trackSid, publication);\n      reemitTrackPublicationEvents(this, publication);\n      log.info('Added a new ' + util.trackPublicationClass(publication) + ':', publication.trackSid);\n      log.debug(util.trackPublicationClass(publication) + ':', publication);\n      return publication;\n    }\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_handleTrackSignalingEvents',\n    value: function _handleTrackSignalingEvents() {\n      var log = this._log;\n      var self = this;\n\n      if (this.state === 'disconnected') {\n        return;\n      }\n\n      var RemoteAudioTrack = this._RemoteAudioTrack;\n      var RemoteAudioTrackPublication = this._RemoteAudioTrackPublication;\n      var RemoteVideoTrack = this._RemoteVideoTrack;\n      var RemoteVideoTrackPublication = this._RemoteVideoTrackPublication;\n      var RemoteDataTrack = this._RemoteDataTrack;\n      var RemoteDataTrackPublication = this._RemoteDataTrackPublication;\n      var participantSignaling = this._signaling;\n\n      function trackSignalingAdded(signaling) {\n        var RemoteTrackPublication = {\n          audio: RemoteAudioTrackPublication,\n          data: RemoteDataTrackPublication,\n          video: RemoteVideoTrackPublication\n        }[signaling.kind];\n        var publication = new RemoteTrackPublication(signaling, {\n          log: log\n        });\n\n        self._addTrackPublication(publication);\n\n        var isSubscribed = signaling.isSubscribed;\n\n        if (isSubscribed) {\n          trackSignalingSubscribed(signaling);\n        }\n\n        self._trackSignalingUpdatedEventCallbacks.set(signaling.sid, function () {\n          if (isSubscribed !== signaling.isSubscribed) {\n            isSubscribed = signaling.isSubscribed;\n\n            if (isSubscribed) {\n              trackSignalingSubscribed(signaling);\n              return;\n            }\n\n            trackSignalingUnsubscribed(signaling);\n          }\n        });\n\n        signaling.on('updated', self._trackSignalingUpdatedEventCallbacks.get(signaling.sid));\n      }\n\n      function trackSignalingRemoved(signaling) {\n        if (signaling.isSubscribed) {\n          signaling.setTrackTransceiver(null);\n        }\n\n        var updated = self._trackSignalingUpdatedEventCallbacks.get(signaling.sid);\n\n        if (updated) {\n          signaling.removeListener('updated', updated);\n\n          self._trackSignalingUpdatedEventCallbacks.delete(signaling.sid);\n        }\n\n        var publication = self.tracks.get(signaling.sid);\n\n        if (publication) {\n          self._removeTrackPublication(publication);\n        }\n      }\n\n      function trackSignalingSubscribed(signaling) {\n        var isEnabled = signaling.isEnabled,\n            name = signaling.name,\n            kind = signaling.kind,\n            sid = signaling.sid,\n            trackTransceiver = signaling.trackTransceiver;\n        var RemoteTrack = {\n          audio: RemoteAudioTrack,\n          video: RemoteVideoTrack,\n          data: RemoteDataTrack\n        }[kind];\n        var publication = self.tracks.get(sid); // NOTE(mroberts): It should never be the case that the TrackSignaling and\n        // MediaStreamTrack or DataTrackReceiver kinds disagree; however, just in\n        // case, we handle it here.\n\n        if (!RemoteTrack || kind !== trackTransceiver.kind) {\n          return;\n        }\n\n        var options = {\n          log: log,\n          name: name\n        };\n\n        var setPriority = function setPriority(newPriority) {\n          return participantSignaling.updateSubscriberTrackPriority(sid, newPriority);\n        };\n\n        var track = kind === 'data' ? new RemoteTrack(sid, trackTransceiver, options) : new RemoteTrack(sid, trackTransceiver, isEnabled, setPriority, options);\n\n        self._addTrack(track, publication, trackTransceiver.id);\n      }\n\n      function trackSignalingUnsubscribed(signaling) {\n        var _Array$from$find = Array.from(self._tracks.entries()).find(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              track = _ref2[1];\n\n          return track.sid === signaling.sid;\n        }),\n            _Array$from$find2 = _slicedToArray(_Array$from$find, 2),\n            id = _Array$from$find2[0],\n            track = _Array$from$find2[1];\n\n        var publication = self.tracks.get(signaling.sid);\n\n        if (track) {\n          self._removeTrack(track, publication, id);\n        }\n      }\n\n      participantSignaling.on('trackAdded', trackSignalingAdded);\n      participantSignaling.on('trackRemoved', trackSignalingRemoved);\n      participantSignaling.tracks.forEach(trackSignalingAdded);\n      participantSignaling.on('stateChanged', function stateChanged(state) {\n        if (state === 'disconnected') {\n          log.debug('Removing event listeners');\n          participantSignaling.removeListener('stateChanged', stateChanged);\n          participantSignaling.removeListener('trackAdded', trackSignalingAdded);\n          participantSignaling.removeListener('trackRemoved', trackSignalingRemoved);\n        } else if (state === 'connected') {\n          // NOTE(mmalavalli): Any transition to \"connected\" here is a result of\n          // successful signaling reconnection, and not a first-time establishment\n          // of the signaling connection.\n          log.info('reconnected'); // NOTE(mpatwardhan): `stateChanged` can get emitted with StateMachine locked.\n          // Do not signal  public events synchronously with lock held.\n\n          setTimeout(function () {\n            return self.emit('reconnected');\n          }, 0);\n        }\n      });\n    }\n    /**\n     * @private\n     * @param {RemoteTrack} track\n     * @param {Track.ID} id\n     * @returns {?RemoteTrack}\n     */\n\n  }, {\n    key: '_removeTrack',\n    value: function _removeTrack(track, id) {\n      if (!this._tracks.has(id)) {\n        return null;\n      }\n\n      this._tracks.delete(id);\n\n      var tracksByKind = {\n        audio: this._audioTracks,\n        video: this._videoTracks,\n        data: this._dataTracks\n      }[track.kind];\n      tracksByKind.delete(id);\n      var reemitters = this._trackEventReemitters.get(id) || new Map();\n      reemitters.forEach(function (reemitter, event) {\n        track.removeListener(event, reemitter);\n      });\n      var log = this._log;\n      log.info('Removed a ' + util.trackClass(track) + ':', id);\n      log.debug(util.trackClass(track) + ':', track);\n      return track;\n    }\n    /**\n     * @private\n     * @param {RemoteTrackPublication} publication\n     * @returns {?RemoteTrackPublication}\n     */\n\n  }, {\n    key: '_removeTrackPublication',\n    value: function _removeTrackPublication(publication) {\n      publication = this.tracks.get(publication.trackSid);\n\n      if (!publication) {\n        return null;\n      }\n\n      this.tracks.delete(publication.trackSid);\n      var trackPublicationsByKind = {\n        audio: this.audioTracks,\n        data: this.dataTracks,\n        video: this.videoTracks\n      }[publication.kind];\n      trackPublicationsByKind.delete(publication.trackSid);\n      var reemitters = this._trackPublicationEventReemitters.get(publication.trackSid) || new Map();\n      reemitters.forEach(function (reemitter, event) {\n        publication.removeListener(event, reemitter);\n      });\n      var log = this._log;\n      log.info('Removed a ' + util.trackPublicationClass(publication) + ':', publication.trackSid);\n      log.debug(util.trackPublicationClass(publication) + ':', publication);\n      return publication;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return util.valueToJSON(this);\n    }\n  }]);\n\n  return Participant;\n}(EventEmitter);\n/**\n * A {@link Participant.SID} is a 34-character string starting with \"PA\"\n * that uniquely identifies a {@link Participant}.\n * @type string\n * @typedef Participant.SID\n */\n\n/**\n * A {@link Participant.Identity} is a string that identifies a\n * {@link Participant}. You can think of it like a name.\n * @typedef {string} Participant.Identity\n */\n\n/**\n * The {@link Participant} has disconnected.\n * @param {Participant} participant - The {@link Participant} that disconnected.\n * @event Participant#disconnected\n */\n\n/**\n * The {@link Participant}'s {@link NetworkQualityLevel} changed.\n * @param {NetworkQualityLevel} networkQualityLevel - The new\n *   {@link NetworkQualityLevel}\n * @param {?NetworkQualityStats} networkQualityStats - The {@link NetworkQualityStats}\n *   based on which {@link NetworkQualityLevel} is calculated, if any\n * @event Participant#networkQualityLevelChanged\n */\n\n/**\n * The {@link Participant} has reconnected to the {@link Room} after a signaling connection disruption.\n * @event Participant#reconnected\n */\n\n/**\n * The {@link Participant} is reconnecting to the {@link Room} after a signaling connection disruption.\n * @event Participant#reconnecting\n */\n\n/**\n * One of the {@link Participant}'s {@link VideoTrack}'s dimensions changed.\n * @param {VideoTrack} track - The {@link VideoTrack} whose dimensions changed\n * @event Participant#trackDimensionsChanged\n */\n\n/**\n * One of the {@link Participant}'s {@link Track}s started.\n * @param {Track} track - The {@link Track} that started\n * @event Participant#trackStarted\n */\n\n/**\n * Indexed {@link Track}s by {@link Track.ID}.\n * @typedef {object} IndexedTracks\n * @property {Array<{0: Track.ID, 1: AudioTrack}>} audioTracks - Indexed\n *   {@link AudioTrack}s\n * @property {Array<{0: Track.ID, 1: DataTrack}>} dataTracks - Indexed\n *   {@link DataTrack}s\n * @property {Array<{0: Track.ID, 1: Track}>} tracks - Indexed {@link Track}s\n * @property {Array<{0: Track.ID, 1: VideoTrack}>} videoTracks - Indexed\n *   {@link VideoTrack}s\n * @private\n */\n\n/**\n * Index tracks by {@link Track.ID}.\n * @param {Array<Track>} tracks\n * @returns {IndexedTracks}\n * @private\n */\n\n\nfunction indexTracksById(tracks) {\n  var indexedTracks = tracks.map(function (track) {\n    return [track.id, track];\n  });\n  var indexedAudioTracks = indexedTracks.filter(function (keyValue) {\n    return keyValue[1].kind === 'audio';\n  });\n  var indexedVideoTracks = indexedTracks.filter(function (keyValue) {\n    return keyValue[1].kind === 'video';\n  });\n  var indexedDataTracks = indexedTracks.filter(function (keyValue) {\n    return keyValue[1].kind === 'data';\n  });\n  return {\n    audioTracks: indexedAudioTracks,\n    dataTracks: indexedDataTracks,\n    tracks: indexedTracks,\n    videoTracks: indexedVideoTracks\n  };\n}\n/**\n * Re-emit {@link ParticipantSignaling} 'stateChanged' events.\n * @param {Participant} participant\n * @param {ParticipantSignaling} signaling\n * @private\n */\n\n\nfunction reemitSignalingStateChangedEvents(participant, signaling) {\n  var log = participant._log;\n\n  if (participant.state === 'disconnected') {\n    return;\n  } // Reemit state transition events from the ParticipantSignaling.\n\n\n  signaling.on('stateChanged', function stateChanged(state) {\n    log.debug('Transitioned to state:', state);\n    participant.emit(state, participant);\n\n    if (state === 'disconnected') {\n      log.debug('Removing Track event reemitters');\n      signaling.removeListener('stateChanged', stateChanged);\n      signaling.tracks.forEach(function (trackSignaling) {\n        var track = participant._tracks.get(trackSignaling.id);\n\n        var reemitters = participant._trackEventReemitters.get(trackSignaling.id);\n\n        if (track && reemitters) {\n          reemitters.forEach(function (reemitter, event) {\n            track.removeListener(event, reemitter);\n          });\n        }\n      });\n\n      participant._trackEventReemitters.clear();\n\n      participant.tracks.forEach(function (publication) {\n        participant._trackPublicationEventReemitters.get(publication.trackSid).forEach(function (reemitter, event) {\n          publication.removeListener(event, reemitter);\n        });\n      });\n\n      participant._trackPublicationEventReemitters.clear();\n    }\n  });\n}\n/**\n * Re-emit {@link Track} events.\n * @param {Participant} participant\n * @param {Track} track\n * @param {Track.ID} id\n * @private\n */\n\n\nfunction reemitTrackEvents(participant, track, id) {\n  var trackEventReemitters = new Map();\n\n  if (participant.state === 'disconnected') {\n    return;\n  }\n\n  participant._getTrackEvents().forEach(function (eventPair) {\n    var trackEvent = eventPair[0];\n    var participantEvent = eventPair[1];\n    trackEventReemitters.set(trackEvent, function () {\n      var args = [participantEvent].concat([].slice.call(arguments));\n      return participant.emit.apply(participant, _toConsumableArray(args));\n    });\n    track.on(trackEvent, trackEventReemitters.get(trackEvent));\n  });\n\n  participant._trackEventReemitters.set(id, trackEventReemitters);\n}\n/**\n * Re-emit {@link TrackPublication} events.\n * @private\n * @param {Participant} participant\n * @param {TrackPublication} publication\n */\n\n\nfunction reemitTrackPublicationEvents(participant, publication) {\n  var publicationEventReemitters = new Map();\n\n  if (participant.state === 'disconnected') {\n    return;\n  }\n\n  participant._getTrackPublicationEvents().forEach(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        publicationEvent = _ref4[0],\n        participantEvent = _ref4[1];\n\n    publicationEventReemitters.set(publicationEvent, function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      participant.emit.apply(participant, [participantEvent].concat(args, [publication]));\n    });\n    publication.on(publicationEvent, publicationEventReemitters.get(publicationEvent));\n  });\n\n  participant._trackPublicationEventReemitters.set(publication.trackSid, publicationEventReemitters);\n}\n\nmodule.exports = Participant;","map":{"version":3,"sources":["/home/ascencion/sebrae_megahack/node_modules/twilio-video/es5/participant.js"],"names":["_slicedToArray","sliceIterator","arr","i","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","length","err","Array","isArray","Object","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","Constructor","protoProps","staticProps","prototype","_toConsumableArray","arr2","from","_classCallCheck","instance","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","EventEmitter","require","RemoteAudioTrack","RemoteAudioTrackPublication","RemoteDataTrack","RemoteDataTrackPublication","RemoteVideoTrack","RemoteVideoTrackPublication","util","nInstances","Participant","_EventEmitter","signaling","options","_this","getPrototypeOf","assign","tracks","indexed","indexTracksById","log","createLog","audioTracks","Map","dataTracks","videoTracks","_RemoteAudioTrack","_RemoteAudioTrackPublication","_RemoteDataTrack","_RemoteDataTrackPublication","_RemoteVideoTrack","_RemoteVideoTrackPublication","_audioTracks","_dataTracks","_instanceId","_log","_signaling","_tracks","_trackEventReemitters","_trackPublicationEventReemitters","_trackSignalingUpdatedEventCallbacks","_videoTracks","identity","get","networkQualityLevel","networkQualityStats","sid","state","forEach","reemitTrackEvents","bind","on","emit","audio","video","reemitSignalingStateChangedEvents","info","_getTrackEvents","_getTrackPublicationEvents","toString","_addTrack","track","id","has","set","tracksByKind","data","kind","trackClass","debug","_addTrackPublication","publication","trackSid","trackPublicationsByKind","reemitTrackPublicationEvents","trackPublicationClass","_handleTrackSignalingEvents","participantSignaling","trackSignalingAdded","RemoteTrackPublication","isSubscribed","trackSignalingSubscribed","trackSignalingUnsubscribed","trackSignalingRemoved","setTrackTransceiver","updated","removeListener","delete","_removeTrackPublication","isEnabled","name","trackTransceiver","RemoteTrack","setPriority","newPriority","updateSubscriberTrackPriority","_Array$from$find","entries","find","_ref","_ref2","_Array$from$find2","_removeTrack","stateChanged","setTimeout","reemitters","reemitter","event","toJSON","valueToJSON","indexedTracks","map","indexedAudioTracks","filter","keyValue","indexedVideoTracks","indexedDataTracks","participant","trackSignaling","clear","trackEventReemitters","eventPair","trackEvent","participantEvent","args","concat","slice","arguments","apply","publicationEventReemitters","_ref3","_ref4","publicationEvent","_len","_key","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar EventEmitter = require('./eventemitter');\nvar RemoteAudioTrack = require('./media/track/remoteaudiotrack');\nvar RemoteAudioTrackPublication = require('./media/track/remoteaudiotrackpublication');\nvar RemoteDataTrack = require('./media/track/remotedatatrack');\nvar RemoteDataTrackPublication = require('./media/track/remotedatatrackpublication');\nvar RemoteVideoTrack = require('./media/track/remotevideotrack');\nvar RemoteVideoTrackPublication = require('./media/track/remotevideotrackpublication');\nvar util = require('./util');\n\nvar nInstances = 0;\n\n/**\n * {@link NetworkQualityLevel} is a value from 0â€“5, inclusive, representing the\n * quality of a network connection.\n * @typedef {number} NetworkQualityLevel\n */\n\n/**\n * @extends EventEmitter\n * @property {Map<Track.SID, AudioTrackPublication>} audioTracks -\n *    The {@link Participant}'s {@link AudioTrackPublication}s\n * @property {Map<Track.SID, DataTrackPublication>} dataTracks -\n *    The {@link Participant}'s {@link DataTrackPublication}s.\n * @property {Participant.Identity} identity - The identity of the {@link Participant}\n * @property {?NetworkQualityLevel} networkQualityLevel - The\n *    {@link Participant}'s current {@link NetworkQualityLevel}, if any\n * @property {?NetworkQualityStats} networkQualityStats - The\n *    {@link Participant}'s current {@link NetworkQualityStats}, if any\n * @property {Participant.SID} sid - The {@link Participant}'s SID\n * @property {string} state - \"connected\", \"disconnected\" or \"reconnecting\"\n * @property {Map<Track.SID, TrackPublication>} tracks -\n *    The {@link Participant}'s {@link TrackPublication}s\n * @property {Map<Track.SID, VideoTrackPublication>} videoTracks -\n *    The {@link Participant}'s {@link VideoTrackPublication}s\n * @emits Participant#disconnected\n * @emits Participant#networkQualityLevelChanged\n * @emits Participant#reconnected\n * @emits Participant#reconnecting\n * @emits Participant#trackDimensionsChanged\n * @emits Participant#trackStarted\n */\n\nvar Participant = function (_EventEmitter) {\n  _inherits(Participant, _EventEmitter);\n\n  /**\n   * Construct a {@link Participant}.\n   * @param {ParticipantSignaling} signaling\n   * @param {object} [options]\n   */\n  function Participant(signaling, options) {\n    _classCallCheck(this, Participant);\n\n    var _this = _possibleConstructorReturn(this, (Participant.__proto__ || Object.getPrototypeOf(Participant)).call(this));\n\n    options = Object.assign({\n      RemoteAudioTrack: RemoteAudioTrack,\n      RemoteAudioTrackPublication: RemoteAudioTrackPublication,\n      RemoteDataTrack: RemoteDataTrack,\n      RemoteDataTrackPublication: RemoteDataTrackPublication,\n      RemoteVideoTrack: RemoteVideoTrack,\n      RemoteVideoTrackPublication: RemoteVideoTrackPublication,\n      tracks: []\n    }, options);\n\n    var indexed = indexTracksById(options.tracks);\n    var log = options.log.createLog('default', _this);\n    var audioTracks = new Map(indexed.audioTracks);\n    var dataTracks = new Map(indexed.dataTracks);\n    var tracks = new Map(indexed.tracks);\n    var videoTracks = new Map(indexed.videoTracks);\n\n    Object.defineProperties(_this, {\n      _RemoteAudioTrack: {\n        value: options.RemoteAudioTrack\n      },\n      _RemoteAudioTrackPublication: {\n        value: options.RemoteAudioTrackPublication\n      },\n      _RemoteDataTrack: {\n        value: options.RemoteDataTrack\n      },\n      _RemoteDataTrackPublication: {\n        value: options.RemoteDataTrackPublication\n      },\n      _RemoteVideoTrack: {\n        value: options.RemoteVideoTrack\n      },\n      _RemoteVideoTrackPublication: {\n        value: options.RemoteVideoTrackPublication\n      },\n      _audioTracks: {\n        value: audioTracks\n      },\n      _dataTracks: {\n        value: dataTracks\n      },\n      _instanceId: {\n        value: ++nInstances\n      },\n      _log: {\n        value: log\n      },\n      _signaling: {\n        value: signaling\n      },\n      _tracks: {\n        value: tracks\n      },\n      _trackEventReemitters: {\n        value: new Map()\n      },\n      _trackPublicationEventReemitters: {\n        value: new Map()\n      },\n      _trackSignalingUpdatedEventCallbacks: {\n        value: new Map()\n      },\n      _videoTracks: {\n        value: videoTracks\n      },\n      audioTracks: {\n        enumerable: true,\n        value: new Map()\n      },\n      dataTracks: {\n        enumerable: true,\n        value: new Map()\n      },\n      identity: {\n        enumerable: true,\n        get: function get() {\n          return signaling.identity;\n        }\n      },\n      networkQualityLevel: {\n        enumerable: true,\n        get: function get() {\n          return signaling.networkQualityLevel;\n        }\n      },\n      networkQualityStats: {\n        enumerable: true,\n        get: function get() {\n          return signaling.networkQualityStats;\n        }\n      },\n      sid: {\n        enumerable: true,\n        get: function get() {\n          return signaling.sid;\n        }\n      },\n      state: {\n        enumerable: true,\n        get: function get() {\n          return signaling.state;\n        }\n      },\n      tracks: {\n        enumerable: true,\n        value: new Map()\n      },\n      videoTracks: {\n        enumerable: true,\n        value: new Map()\n      }\n    });\n\n    _this._tracks.forEach(reemitTrackEvents.bind(null, _this));\n    signaling.on('networkQualityLevelChanged', function () {\n      return _this.emit('networkQualityLevelChanged', _this.networkQualityLevel, _this.networkQualityStats && (_this.networkQualityStats.audio || _this.networkQualityStats.video) ? _this.networkQualityStats : null);\n    });\n    reemitSignalingStateChangedEvents(_this, signaling);\n    log.info('Created a new Participant' + (_this.identity ? ': ' + _this.identity : ''));\n    return _this;\n  }\n\n  /**\n   * Get the {@link RemoteTrack} events to re-emit.\n   * @private\n   * @returns {Array<Array<string>>} events\n   */\n\n\n  _createClass(Participant, [{\n    key: '_getTrackEvents',\n    value: function _getTrackEvents() {\n      return [['dimensionsChanged', 'trackDimensionsChanged'], ['message', 'trackMessage'], ['started', 'trackStarted']];\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_getTrackPublicationEvents',\n    value: function _getTrackPublicationEvents() {\n      return [];\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return '[Participant #' + this._instanceId + ': ' + this.sid + ']';\n    }\n\n    /**\n     * @private\n     * @param {RemoteTrack} track\n     * @param {Track.ID} id\n     * @returns {?RemoteTrack}\n     */\n\n  }, {\n    key: '_addTrack',\n    value: function _addTrack(track, id) {\n      var log = this._log;\n      if (this._tracks.has(id)) {\n        return null;\n      }\n      this._tracks.set(id, track);\n\n      var tracksByKind = {\n        audio: this._audioTracks,\n        video: this._videoTracks,\n        data: this._dataTracks\n      }[track.kind];\n      tracksByKind.set(id, track);\n      reemitTrackEvents(this, track, id);\n\n      log.info('Added a new ' + util.trackClass(track) + ':', id);\n      log.debug(util.trackClass(track) + ':', track);\n\n      return track;\n    }\n\n    /**\n     * @private\n     * @param {RemoteTrackPublication} publication\n     * @returns {?RemoteTrackPublication}\n     */\n\n  }, {\n    key: '_addTrackPublication',\n    value: function _addTrackPublication(publication) {\n      var log = this._log;\n      if (this.tracks.has(publication.trackSid)) {\n        return null;\n      }\n      this.tracks.set(publication.trackSid, publication);\n\n      var trackPublicationsByKind = {\n        audio: this.audioTracks,\n        data: this.dataTracks,\n        video: this.videoTracks\n      }[publication.kind];\n      trackPublicationsByKind.set(publication.trackSid, publication);\n      reemitTrackPublicationEvents(this, publication);\n\n      log.info('Added a new ' + util.trackPublicationClass(publication) + ':', publication.trackSid);\n      log.debug(util.trackPublicationClass(publication) + ':', publication);\n      return publication;\n    }\n\n    /**\n     * @private\n     */\n\n  }, {\n    key: '_handleTrackSignalingEvents',\n    value: function _handleTrackSignalingEvents() {\n      var log = this._log;\n      var self = this;\n\n      if (this.state === 'disconnected') {\n        return;\n      }\n\n      var RemoteAudioTrack = this._RemoteAudioTrack;\n      var RemoteAudioTrackPublication = this._RemoteAudioTrackPublication;\n      var RemoteVideoTrack = this._RemoteVideoTrack;\n      var RemoteVideoTrackPublication = this._RemoteVideoTrackPublication;\n      var RemoteDataTrack = this._RemoteDataTrack;\n      var RemoteDataTrackPublication = this._RemoteDataTrackPublication;\n      var participantSignaling = this._signaling;\n\n      function trackSignalingAdded(signaling) {\n        var RemoteTrackPublication = {\n          audio: RemoteAudioTrackPublication,\n          data: RemoteDataTrackPublication,\n          video: RemoteVideoTrackPublication\n        }[signaling.kind];\n\n        var publication = new RemoteTrackPublication(signaling, { log: log });\n        self._addTrackPublication(publication);\n\n        var isSubscribed = signaling.isSubscribed;\n        if (isSubscribed) {\n          trackSignalingSubscribed(signaling);\n        }\n\n        self._trackSignalingUpdatedEventCallbacks.set(signaling.sid, function () {\n          if (isSubscribed !== signaling.isSubscribed) {\n            isSubscribed = signaling.isSubscribed;\n            if (isSubscribed) {\n              trackSignalingSubscribed(signaling);\n              return;\n            }\n            trackSignalingUnsubscribed(signaling);\n          }\n        });\n        signaling.on('updated', self._trackSignalingUpdatedEventCallbacks.get(signaling.sid));\n      }\n\n      function trackSignalingRemoved(signaling) {\n        if (signaling.isSubscribed) {\n          signaling.setTrackTransceiver(null);\n        }\n        var updated = self._trackSignalingUpdatedEventCallbacks.get(signaling.sid);\n        if (updated) {\n          signaling.removeListener('updated', updated);\n          self._trackSignalingUpdatedEventCallbacks.delete(signaling.sid);\n        }\n        var publication = self.tracks.get(signaling.sid);\n        if (publication) {\n          self._removeTrackPublication(publication);\n        }\n      }\n\n      function trackSignalingSubscribed(signaling) {\n        var isEnabled = signaling.isEnabled,\n            name = signaling.name,\n            kind = signaling.kind,\n            sid = signaling.sid,\n            trackTransceiver = signaling.trackTransceiver;\n\n        var RemoteTrack = {\n          audio: RemoteAudioTrack,\n          video: RemoteVideoTrack,\n          data: RemoteDataTrack\n        }[kind];\n\n        var publication = self.tracks.get(sid);\n\n        // NOTE(mroberts): It should never be the case that the TrackSignaling and\n        // MediaStreamTrack or DataTrackReceiver kinds disagree; however, just in\n        // case, we handle it here.\n        if (!RemoteTrack || kind !== trackTransceiver.kind) {\n          return;\n        }\n\n        var options = { log: log, name: name };\n        var setPriority = function setPriority(newPriority) {\n          return participantSignaling.updateSubscriberTrackPriority(sid, newPriority);\n        };\n        var track = kind === 'data' ? new RemoteTrack(sid, trackTransceiver, options) : new RemoteTrack(sid, trackTransceiver, isEnabled, setPriority, options);\n\n        self._addTrack(track, publication, trackTransceiver.id);\n      }\n\n      function trackSignalingUnsubscribed(signaling) {\n        var _Array$from$find = Array.from(self._tracks.entries()).find(function (_ref) {\n          var _ref2 = _slicedToArray(_ref, 2),\n              track = _ref2[1];\n\n          return track.sid === signaling.sid;\n        }),\n            _Array$from$find2 = _slicedToArray(_Array$from$find, 2),\n            id = _Array$from$find2[0],\n            track = _Array$from$find2[1];\n\n        var publication = self.tracks.get(signaling.sid);\n        if (track) {\n          self._removeTrack(track, publication, id);\n        }\n      }\n\n      participantSignaling.on('trackAdded', trackSignalingAdded);\n      participantSignaling.on('trackRemoved', trackSignalingRemoved);\n\n      participantSignaling.tracks.forEach(trackSignalingAdded);\n\n      participantSignaling.on('stateChanged', function stateChanged(state) {\n        if (state === 'disconnected') {\n          log.debug('Removing event listeners');\n          participantSignaling.removeListener('stateChanged', stateChanged);\n          participantSignaling.removeListener('trackAdded', trackSignalingAdded);\n          participantSignaling.removeListener('trackRemoved', trackSignalingRemoved);\n        } else if (state === 'connected') {\n          // NOTE(mmalavalli): Any transition to \"connected\" here is a result of\n          // successful signaling reconnection, and not a first-time establishment\n          // of the signaling connection.\n          log.info('reconnected');\n\n          // NOTE(mpatwardhan): `stateChanged` can get emitted with StateMachine locked.\n          // Do not signal  public events synchronously with lock held.\n          setTimeout(function () {\n            return self.emit('reconnected');\n          }, 0);\n        }\n      });\n    }\n\n    /**\n     * @private\n     * @param {RemoteTrack} track\n     * @param {Track.ID} id\n     * @returns {?RemoteTrack}\n     */\n\n  }, {\n    key: '_removeTrack',\n    value: function _removeTrack(track, id) {\n      if (!this._tracks.has(id)) {\n        return null;\n      }\n      this._tracks.delete(id);\n\n      var tracksByKind = {\n        audio: this._audioTracks,\n        video: this._videoTracks,\n        data: this._dataTracks\n      }[track.kind];\n      tracksByKind.delete(id);\n\n      var reemitters = this._trackEventReemitters.get(id) || new Map();\n      reemitters.forEach(function (reemitter, event) {\n        track.removeListener(event, reemitter);\n      });\n\n      var log = this._log;\n      log.info('Removed a ' + util.trackClass(track) + ':', id);\n      log.debug(util.trackClass(track) + ':', track);\n      return track;\n    }\n\n    /**\n     * @private\n     * @param {RemoteTrackPublication} publication\n     * @returns {?RemoteTrackPublication}\n     */\n\n  }, {\n    key: '_removeTrackPublication',\n    value: function _removeTrackPublication(publication) {\n      publication = this.tracks.get(publication.trackSid);\n      if (!publication) {\n        return null;\n      }\n      this.tracks.delete(publication.trackSid);\n\n      var trackPublicationsByKind = {\n        audio: this.audioTracks,\n        data: this.dataTracks,\n        video: this.videoTracks\n      }[publication.kind];\n      trackPublicationsByKind.delete(publication.trackSid);\n\n      var reemitters = this._trackPublicationEventReemitters.get(publication.trackSid) || new Map();\n      reemitters.forEach(function (reemitter, event) {\n        publication.removeListener(event, reemitter);\n      });\n\n      var log = this._log;\n      log.info('Removed a ' + util.trackPublicationClass(publication) + ':', publication.trackSid);\n      log.debug(util.trackPublicationClass(publication) + ':', publication);\n      return publication;\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return util.valueToJSON(this);\n    }\n  }]);\n\n  return Participant;\n}(EventEmitter);\n\n/**\n * A {@link Participant.SID} is a 34-character string starting with \"PA\"\n * that uniquely identifies a {@link Participant}.\n * @type string\n * @typedef Participant.SID\n */\n\n/**\n * A {@link Participant.Identity} is a string that identifies a\n * {@link Participant}. You can think of it like a name.\n * @typedef {string} Participant.Identity\n */\n\n/**\n * The {@link Participant} has disconnected.\n * @param {Participant} participant - The {@link Participant} that disconnected.\n * @event Participant#disconnected\n */\n\n/**\n * The {@link Participant}'s {@link NetworkQualityLevel} changed.\n * @param {NetworkQualityLevel} networkQualityLevel - The new\n *   {@link NetworkQualityLevel}\n * @param {?NetworkQualityStats} networkQualityStats - The {@link NetworkQualityStats}\n *   based on which {@link NetworkQualityLevel} is calculated, if any\n * @event Participant#networkQualityLevelChanged\n */\n\n/**\n * The {@link Participant} has reconnected to the {@link Room} after a signaling connection disruption.\n * @event Participant#reconnected\n */\n\n/**\n * The {@link Participant} is reconnecting to the {@link Room} after a signaling connection disruption.\n * @event Participant#reconnecting\n */\n\n/**\n * One of the {@link Participant}'s {@link VideoTrack}'s dimensions changed.\n * @param {VideoTrack} track - The {@link VideoTrack} whose dimensions changed\n * @event Participant#trackDimensionsChanged\n */\n\n/**\n * One of the {@link Participant}'s {@link Track}s started.\n * @param {Track} track - The {@link Track} that started\n * @event Participant#trackStarted\n */\n\n/**\n * Indexed {@link Track}s by {@link Track.ID}.\n * @typedef {object} IndexedTracks\n * @property {Array<{0: Track.ID, 1: AudioTrack}>} audioTracks - Indexed\n *   {@link AudioTrack}s\n * @property {Array<{0: Track.ID, 1: DataTrack}>} dataTracks - Indexed\n *   {@link DataTrack}s\n * @property {Array<{0: Track.ID, 1: Track}>} tracks - Indexed {@link Track}s\n * @property {Array<{0: Track.ID, 1: VideoTrack}>} videoTracks - Indexed\n *   {@link VideoTrack}s\n * @private\n */\n\n/**\n * Index tracks by {@link Track.ID}.\n * @param {Array<Track>} tracks\n * @returns {IndexedTracks}\n * @private\n */\n\n\nfunction indexTracksById(tracks) {\n  var indexedTracks = tracks.map(function (track) {\n    return [track.id, track];\n  });\n  var indexedAudioTracks = indexedTracks.filter(function (keyValue) {\n    return keyValue[1].kind === 'audio';\n  });\n  var indexedVideoTracks = indexedTracks.filter(function (keyValue) {\n    return keyValue[1].kind === 'video';\n  });\n  var indexedDataTracks = indexedTracks.filter(function (keyValue) {\n    return keyValue[1].kind === 'data';\n  });\n\n  return {\n    audioTracks: indexedAudioTracks,\n    dataTracks: indexedDataTracks,\n    tracks: indexedTracks,\n    videoTracks: indexedVideoTracks\n  };\n}\n\n/**\n * Re-emit {@link ParticipantSignaling} 'stateChanged' events.\n * @param {Participant} participant\n * @param {ParticipantSignaling} signaling\n * @private\n */\nfunction reemitSignalingStateChangedEvents(participant, signaling) {\n  var log = participant._log;\n\n  if (participant.state === 'disconnected') {\n    return;\n  }\n\n  // Reemit state transition events from the ParticipantSignaling.\n  signaling.on('stateChanged', function stateChanged(state) {\n    log.debug('Transitioned to state:', state);\n    participant.emit(state, participant);\n    if (state === 'disconnected') {\n      log.debug('Removing Track event reemitters');\n      signaling.removeListener('stateChanged', stateChanged);\n\n      signaling.tracks.forEach(function (trackSignaling) {\n        var track = participant._tracks.get(trackSignaling.id);\n        var reemitters = participant._trackEventReemitters.get(trackSignaling.id);\n        if (track && reemitters) {\n          reemitters.forEach(function (reemitter, event) {\n            track.removeListener(event, reemitter);\n          });\n        }\n      });\n      participant._trackEventReemitters.clear();\n\n      participant.tracks.forEach(function (publication) {\n        participant._trackPublicationEventReemitters.get(publication.trackSid).forEach(function (reemitter, event) {\n          publication.removeListener(event, reemitter);\n        });\n      });\n      participant._trackPublicationEventReemitters.clear();\n    }\n  });\n}\n\n/**\n * Re-emit {@link Track} events.\n * @param {Participant} participant\n * @param {Track} track\n * @param {Track.ID} id\n * @private\n */\nfunction reemitTrackEvents(participant, track, id) {\n  var trackEventReemitters = new Map();\n\n  if (participant.state === 'disconnected') {\n    return;\n  }\n\n  participant._getTrackEvents().forEach(function (eventPair) {\n    var trackEvent = eventPair[0];\n    var participantEvent = eventPair[1];\n\n    trackEventReemitters.set(trackEvent, function () {\n      var args = [participantEvent].concat([].slice.call(arguments));\n      return participant.emit.apply(participant, _toConsumableArray(args));\n    });\n\n    track.on(trackEvent, trackEventReemitters.get(trackEvent));\n  });\n\n  participant._trackEventReemitters.set(id, trackEventReemitters);\n}\n\n/**\n * Re-emit {@link TrackPublication} events.\n * @private\n * @param {Participant} participant\n * @param {TrackPublication} publication\n */\nfunction reemitTrackPublicationEvents(participant, publication) {\n  var publicationEventReemitters = new Map();\n\n  if (participant.state === 'disconnected') {\n    return;\n  }\n\n  participant._getTrackPublicationEvents().forEach(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        publicationEvent = _ref4[0],\n        participantEvent = _ref4[1];\n\n    publicationEventReemitters.set(publicationEvent, function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      participant.emit.apply(participant, [participantEvent].concat(args, [publication]));\n    });\n    publication.on(publicationEvent, publicationEventReemitters.get(publicationEvent));\n  });\n\n  participant._trackPublicationEventReemitters.set(publication.trackSid, publicationEventReemitters);\n}\n\nmodule.exports = Participant;"]},"metadata":{},"sourceType":"script"}