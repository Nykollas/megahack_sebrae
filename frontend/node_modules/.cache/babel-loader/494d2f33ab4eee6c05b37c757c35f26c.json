{"ast":null,"code":"\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar logger_1 = require(\"./logger\");\n\nvar channel_1 = require(\"./channel\");\n\nvar log = logger_1.Logger.scope('ChannelDescriptor');\n\nfunction parseAttributes(attrs) {\n  try {\n    return JSON.parse(attrs);\n  } catch (e) {\n    log.warn('Failed to parse channel attributes', e);\n  }\n\n  return {};\n}\n\nfunction parseTime(timeString) {\n  try {\n    return new Date(timeString);\n  } catch (e) {\n    return null;\n  }\n}\n/**\n * Contains channel information.\n * Unlike {@link Channel}, this information won't be updated in realtime.\n * To have a fresh data, user should query channel descriptors again.\n *\n * @property {Object} attributes - The Channel's custom attributes\n * @property {String} createdBy - The identity of the User that created Channel\n * @property {Date} dateCreated - The Date Channel was created\n * @property {Date} dateUpdated - The Date Channel was last updated\n * @property {String} friendlyName - The Channel's name\n * @property {Boolean} isPrivate - Whether the channel is private (as opposed to public)\n * @property {Number} lastConsumedMessageIndex - Index of the last Message the User has consumed in Channel\n * @property {Number} membersCount Number of members in a channel\n * @property {Number} messagesCount Number of messages in a channel\n * @property {String} sid - The Channel's unique system identifier\n * @property {Channel#Status} status - The Channel's status\n * @property {Channel#Type} type - The Channel's type\n * @property {String} uniqueName - The Channel's unique name\n */\n\n\nvar ChannelDescriptor = function () {\n  /**\n   * @param {Client} client Chat client instance\n   * @param {Object} descriptor Channel descriptor data object\n   * @private\n   */\n  function ChannelDescriptor(client, descriptor) {\n    (0, _classCallCheck3.default)(this, ChannelDescriptor);\n    this.client = client;\n    this.descriptor = descriptor;\n\n    if (descriptor.sid) {\n      this.sid = descriptor.sid;\n      this.channel = descriptor.sid + '.channel';\n    } else {\n      this.sid = descriptor.channel_sid;\n      this.channel = descriptor.channel_sid + '.channel';\n    }\n\n    this.uniqueName = descriptor.unique_name;\n    this.friendlyName = descriptor.friendly_name;\n    this.attributes = parseAttributes(descriptor.attributes);\n    this.createdBy = descriptor.created_by;\n    this.dateCreated = parseTime(descriptor.date_created);\n    this.dateUpdated = parseTime(descriptor.date_updated);\n    this.messagesCount = descriptor.messages_count;\n    this.membersCount = descriptor.members_count;\n    this.type = descriptor.type;\n    this.isPrivate = descriptor.type == 'private' ? true : false;\n    this.lastConsumedMessageIndex = descriptor.last_consumed_message_index;\n\n    if (descriptor.notification_level) {\n      this.notificationLevel = descriptor.notification_level;\n    }\n\n    if (descriptor.status) {\n      this.status = channel_1.filterStatus(descriptor.status);\n    } else {\n      this.status = 'unknown';\n    }\n  }\n  /**\n   * Get channel object from descriptor.\n   * @returns {Promise<Channel>}\n   */\n\n\n  (0, _createClass3.default)(ChannelDescriptor, [{\n    key: \"getChannel\",\n    value: function getChannel() {\n      return this.client.getChannelBySid(this.sid);\n    }\n  }]);\n  return ChannelDescriptor;\n}();\n\nexports.ChannelDescriptor = ChannelDescriptor;","map":{"version":3,"sources":["/home/ascencion/sebrae_megahack/node_modules/twilio-chat/browser/channeldescriptor.js"],"names":["_classCallCheck2","require","_classCallCheck3","_interopRequireDefault","_createClass2","_createClass3","obj","__esModule","default","Object","defineProperty","exports","value","logger_1","channel_1","log","Logger","scope","parseAttributes","attrs","JSON","parse","e","warn","parseTime","timeString","Date","ChannelDescriptor","client","descriptor","sid","channel","channel_sid","uniqueName","unique_name","friendlyName","friendly_name","attributes","createdBy","created_by","dateCreated","date_created","dateUpdated","date_updated","messagesCount","messages_count","membersCount","members_count","type","isPrivate","lastConsumedMessageIndex","last_consumed_message_index","notification_level","notificationLevel","status","filterStatus","key","getChannel","getChannelBySid"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require(\"babel-runtime/helpers/createClass\");\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar logger_1 = require(\"./logger\");\nvar channel_1 = require(\"./channel\");\nvar log = logger_1.Logger.scope('ChannelDescriptor');\nfunction parseAttributes(attrs) {\n    try {\n        return JSON.parse(attrs);\n    } catch (e) {\n        log.warn('Failed to parse channel attributes', e);\n    }\n    return {};\n}\nfunction parseTime(timeString) {\n    try {\n        return new Date(timeString);\n    } catch (e) {\n        return null;\n    }\n}\n/**\n * Contains channel information.\n * Unlike {@link Channel}, this information won't be updated in realtime.\n * To have a fresh data, user should query channel descriptors again.\n *\n * @property {Object} attributes - The Channel's custom attributes\n * @property {String} createdBy - The identity of the User that created Channel\n * @property {Date} dateCreated - The Date Channel was created\n * @property {Date} dateUpdated - The Date Channel was last updated\n * @property {String} friendlyName - The Channel's name\n * @property {Boolean} isPrivate - Whether the channel is private (as opposed to public)\n * @property {Number} lastConsumedMessageIndex - Index of the last Message the User has consumed in Channel\n * @property {Number} membersCount Number of members in a channel\n * @property {Number} messagesCount Number of messages in a channel\n * @property {String} sid - The Channel's unique system identifier\n * @property {Channel#Status} status - The Channel's status\n * @property {Channel#Type} type - The Channel's type\n * @property {String} uniqueName - The Channel's unique name\n */\n\nvar ChannelDescriptor = function () {\n    /**\n     * @param {Client} client Chat client instance\n     * @param {Object} descriptor Channel descriptor data object\n     * @private\n     */\n    function ChannelDescriptor(client, descriptor) {\n        (0, _classCallCheck3.default)(this, ChannelDescriptor);\n\n        this.client = client;\n        this.descriptor = descriptor;\n        if (descriptor.sid) {\n            this.sid = descriptor.sid;\n            this.channel = descriptor.sid + '.channel';\n        } else {\n            this.sid = descriptor.channel_sid;\n            this.channel = descriptor.channel_sid + '.channel';\n        }\n        this.uniqueName = descriptor.unique_name;\n        this.friendlyName = descriptor.friendly_name;\n        this.attributes = parseAttributes(descriptor.attributes);\n        this.createdBy = descriptor.created_by;\n        this.dateCreated = parseTime(descriptor.date_created);\n        this.dateUpdated = parseTime(descriptor.date_updated);\n        this.messagesCount = descriptor.messages_count;\n        this.membersCount = descriptor.members_count;\n        this.type = descriptor.type;\n        this.isPrivate = descriptor.type == 'private' ? true : false;\n        this.lastConsumedMessageIndex = descriptor.last_consumed_message_index;\n        if (descriptor.notification_level) {\n            this.notificationLevel = descriptor.notification_level;\n        }\n        if (descriptor.status) {\n            this.status = channel_1.filterStatus(descriptor.status);\n        } else {\n            this.status = 'unknown';\n        }\n    }\n    /**\n     * Get channel object from descriptor.\n     * @returns {Promise<Channel>}\n     */\n\n\n    (0, _createClass3.default)(ChannelDescriptor, [{\n        key: \"getChannel\",\n        value: function getChannel() {\n            return this.client.getChannelBySid(this.sid);\n        }\n    }]);\n    return ChannelDescriptor;\n}();\n\nexports.ChannelDescriptor = ChannelDescriptor;"]},"metadata":{},"sourceType":"script"}