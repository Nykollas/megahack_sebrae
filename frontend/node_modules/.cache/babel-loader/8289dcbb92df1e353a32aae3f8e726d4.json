{"ast":null,"code":"'use strict';\n\nvar CancelablePromise = require('./util/cancelablepromise');\n/**\n * Create a {@link CancelablePromise<Room>}.\n * @param {function(function(Array<LocalTrack>): CancelablePromise<RoomSignaling>):\n *   Promise<function(): CancelablePromise<RoomSignaling>>} getLocalTracks\n * @param {function(Array<LocalTrack>): LocalParticipant} createLocalParticipant\n * @param {function(Array<LocalTrack>): CancelablePromise<RoomSignaling>} createRoomSignaling\n * @param {function(LocalParticipant, RoomSignaling): Room} createRoom\n * @returns CancelablePromise<Room>\n */\n\n\nfunction createCancelableRoomPromise(getLocalTracks, createLocalParticipant, createRoomSignaling, createRoom) {\n  var cancelableRoomSignalingPromise = void 0;\n  var cancelationError = new Error('Canceled');\n  return new CancelablePromise(function onCreate(resolve, reject, isCanceled) {\n    var localParticipant = void 0;\n    getLocalTracks(function getLocalTracksSucceeded(localTracks) {\n      if (isCanceled()) {\n        return CancelablePromise.reject(cancelationError);\n      }\n\n      localParticipant = createLocalParticipant(localTracks);\n      return createRoomSignaling(localParticipant).then(function createRoomSignalingSucceeded(getCancelableRoomSignalingPromise) {\n        if (isCanceled()) {\n          throw cancelationError;\n        }\n\n        cancelableRoomSignalingPromise = getCancelableRoomSignalingPromise();\n        return cancelableRoomSignalingPromise;\n      });\n    }).then(function roomSignalingConnected(roomSignaling) {\n      if (isCanceled()) {\n        roomSignaling.disconnect();\n        throw cancelationError;\n      }\n\n      resolve(createRoom(localParticipant, roomSignaling));\n    }).catch(function onError(error) {\n      reject(error);\n    });\n  }, function onCancel() {\n    if (cancelableRoomSignalingPromise) {\n      cancelableRoomSignalingPromise.cancel();\n    }\n  });\n}\n\nmodule.exports = createCancelableRoomPromise;","map":{"version":3,"sources":["/home/ascencion/sebrae_megahack/node_modules/twilio-video/es5/cancelableroompromise.js"],"names":["CancelablePromise","require","createCancelableRoomPromise","getLocalTracks","createLocalParticipant","createRoomSignaling","createRoom","cancelableRoomSignalingPromise","cancelationError","Error","onCreate","resolve","reject","isCanceled","localParticipant","getLocalTracksSucceeded","localTracks","then","createRoomSignalingSucceeded","getCancelableRoomSignalingPromise","roomSignalingConnected","roomSignaling","disconnect","catch","onError","error","onCancel","cancel","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,iBAAiB,GAAGC,OAAO,CAAC,0BAAD,CAA/B;AAEA;;;;;;;;;;;AASA,SAASC,2BAAT,CAAqCC,cAArC,EAAqDC,sBAArD,EAA6EC,mBAA7E,EAAkGC,UAAlG,EAA8G;AAC5G,MAAIC,8BAA8B,GAAG,KAAK,CAA1C;AACA,MAAIC,gBAAgB,GAAG,IAAIC,KAAJ,CAAU,UAAV,CAAvB;AAEA,SAAO,IAAIT,iBAAJ,CAAsB,SAASU,QAAT,CAAkBC,OAAlB,EAA2BC,MAA3B,EAAmCC,UAAnC,EAA+C;AAC1E,QAAIC,gBAAgB,GAAG,KAAK,CAA5B;AACAX,IAAAA,cAAc,CAAC,SAASY,uBAAT,CAAiCC,WAAjC,EAA8C;AAC3D,UAAIH,UAAU,EAAd,EAAkB;AAChB,eAAOb,iBAAiB,CAACY,MAAlB,CAAyBJ,gBAAzB,CAAP;AACD;;AACDM,MAAAA,gBAAgB,GAAGV,sBAAsB,CAACY,WAAD,CAAzC;AACA,aAAOX,mBAAmB,CAACS,gBAAD,CAAnB,CAAsCG,IAAtC,CAA2C,SAASC,4BAAT,CAAsCC,iCAAtC,EAAyE;AACzH,YAAIN,UAAU,EAAd,EAAkB;AAChB,gBAAML,gBAAN;AACD;;AACDD,QAAAA,8BAA8B,GAAGY,iCAAiC,EAAlE;AACA,eAAOZ,8BAAP;AACD,OANM,CAAP;AAOD,KAZa,CAAd,CAYGU,IAZH,CAYQ,SAASG,sBAAT,CAAgCC,aAAhC,EAA+C;AACrD,UAAIR,UAAU,EAAd,EAAkB;AAChBQ,QAAAA,aAAa,CAACC,UAAd;AACA,cAAMd,gBAAN;AACD;;AACDG,MAAAA,OAAO,CAACL,UAAU,CAACQ,gBAAD,EAAmBO,aAAnB,CAAX,CAAP;AACD,KAlBD,EAkBGE,KAlBH,CAkBS,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AAC/Bb,MAAAA,MAAM,CAACa,KAAD,CAAN;AACD,KApBD;AAqBD,GAvBM,EAuBJ,SAASC,QAAT,GAAoB;AACrB,QAAInB,8BAAJ,EAAoC;AAClCA,MAAAA,8BAA8B,CAACoB,MAA/B;AACD;AACF,GA3BM,CAAP;AA4BD;;AAEDC,MAAM,CAACC,OAAP,GAAiB3B,2BAAjB","sourcesContent":["'use strict';\n\nvar CancelablePromise = require('./util/cancelablepromise');\n\n/**\n * Create a {@link CancelablePromise<Room>}.\n * @param {function(function(Array<LocalTrack>): CancelablePromise<RoomSignaling>):\n *   Promise<function(): CancelablePromise<RoomSignaling>>} getLocalTracks\n * @param {function(Array<LocalTrack>): LocalParticipant} createLocalParticipant\n * @param {function(Array<LocalTrack>): CancelablePromise<RoomSignaling>} createRoomSignaling\n * @param {function(LocalParticipant, RoomSignaling): Room} createRoom\n * @returns CancelablePromise<Room>\n */\nfunction createCancelableRoomPromise(getLocalTracks, createLocalParticipant, createRoomSignaling, createRoom) {\n  var cancelableRoomSignalingPromise = void 0;\n  var cancelationError = new Error('Canceled');\n\n  return new CancelablePromise(function onCreate(resolve, reject, isCanceled) {\n    var localParticipant = void 0;\n    getLocalTracks(function getLocalTracksSucceeded(localTracks) {\n      if (isCanceled()) {\n        return CancelablePromise.reject(cancelationError);\n      }\n      localParticipant = createLocalParticipant(localTracks);\n      return createRoomSignaling(localParticipant).then(function createRoomSignalingSucceeded(getCancelableRoomSignalingPromise) {\n        if (isCanceled()) {\n          throw cancelationError;\n        }\n        cancelableRoomSignalingPromise = getCancelableRoomSignalingPromise();\n        return cancelableRoomSignalingPromise;\n      });\n    }).then(function roomSignalingConnected(roomSignaling) {\n      if (isCanceled()) {\n        roomSignaling.disconnect();\n        throw cancelationError;\n      }\n      resolve(createRoom(localParticipant, roomSignaling));\n    }).catch(function onError(error) {\n      reject(error);\n    });\n  }, function onCancel() {\n    if (cancelableRoomSignalingPromise) {\n      cancelableRoomSignalingPromise.cancel();\n    }\n  });\n}\n\nmodule.exports = createCancelableRoomPromise;"]},"metadata":{},"sourceType":"script"}