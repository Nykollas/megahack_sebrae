{"ast":null,"code":"import { useEffect, useState } from 'react';\nexport default function usePublications(participant) {\n  const [publications, setPublications] = useState([]);\n  useEffect(() => {\n    // Reset the publications when the 'participant' variable changes.\n    setPublications(Array.from(participant.tracks.values()));\n\n    const publicationAdded = publication => setPublications(prevPublications => [...prevPublications, publication]);\n\n    const publicationRemoved = publication => setPublications(prevPublications => prevPublications.filter(p => p !== publication));\n\n    participant.on('trackPublished', publicationAdded);\n    participant.on('trackUnpublished', publicationRemoved);\n    return () => {\n      participant.off('trackPublished', publicationAdded);\n      participant.off('trackUnpublished', publicationRemoved);\n    };\n  }, [participant]);\n  return publications;\n}","map":{"version":3,"sources":["/home/ascencion/sebrae_megahack/src/hooks/usePublications/usePublications.tsx"],"names":["useEffect","useState","usePublications","participant","publications","setPublications","Array","from","tracks","values","publicationAdded","publication","prevPublications","publicationRemoved","filter","p","on","off"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAKA,eAAe,SAASC,eAAT,CAAyBC,WAAzB,EAAmD;AAChE,QAAM,CAACC,YAAD,EAAeC,eAAf,IAAkCJ,QAAQ,CAAqB,EAArB,CAAhD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd;AACAK,IAAAA,eAAe,CAACC,KAAK,CAACC,IAAN,CAAWJ,WAAW,CAACK,MAAZ,CAAmBC,MAAnB,EAAX,CAAD,CAAf;;AAEA,UAAMC,gBAAgB,GAAIC,WAAD,IACvBN,eAAe,CAACO,gBAAgB,IAAI,CAAC,GAAGA,gBAAJ,EAAsBD,WAAtB,CAArB,CADjB;;AAEA,UAAME,kBAAkB,GAAIF,WAAD,IACzBN,eAAe,CAACO,gBAAgB,IAAIA,gBAAgB,CAACE,MAAjB,CAAwBC,CAAC,IAAIA,CAAC,KAAKJ,WAAnC,CAArB,CADjB;;AAGAR,IAAAA,WAAW,CAACa,EAAZ,CAAe,gBAAf,EAAiCN,gBAAjC;AACAP,IAAAA,WAAW,CAACa,EAAZ,CAAe,kBAAf,EAAmCH,kBAAnC;AACA,WAAO,MAAM;AACXV,MAAAA,WAAW,CAACc,GAAZ,CAAgB,gBAAhB,EAAkCP,gBAAlC;AACAP,MAAAA,WAAW,CAACc,GAAZ,CAAgB,kBAAhB,EAAoCJ,kBAApC;AACD,KAHD;AAID,GAfQ,EAeN,CAACV,WAAD,CAfM,CAAT;AAiBA,SAAOC,YAAP;AACD","sourcesContent":["import { useEffect, useState } from 'react';\nimport { LocalTrackPublication, Participant, RemoteTrackPublication } from 'twilio-video';\n\ntype TrackPublication = LocalTrackPublication | RemoteTrackPublication;\n\nexport default function usePublications(participant: Participant) {\n  const [publications, setPublications] = useState<TrackPublication[]>([]);\n\n  useEffect(() => {\n    // Reset the publications when the 'participant' variable changes.\n    setPublications(Array.from(participant.tracks.values()) as TrackPublication[]);\n\n    const publicationAdded = (publication: TrackPublication) =>\n      setPublications(prevPublications => [...prevPublications, publication]);\n    const publicationRemoved = (publication: TrackPublication) =>\n      setPublications(prevPublications => prevPublications.filter(p => p !== publication));\n\n    participant.on('trackPublished', publicationAdded);\n    participant.on('trackUnpublished', publicationRemoved);\n    return () => {\n      participant.off('trackPublished', publicationAdded);\n      participant.off('trackUnpublished', publicationRemoved);\n    };\n  }, [participant]);\n\n  return publications;\n}\n"]},"metadata":{},"sourceType":"module"}